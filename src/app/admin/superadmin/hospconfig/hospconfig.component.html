<div class="flex-flow-container"
     fxFlex="1 1 100%"
     fxLayout="row wrap"
     fxLayoutAlign="center">

    <mat-expansion-panel class="m-12 expansion-headers-align" fxFlex="1 1 100%">
        <mat-expansion-panel-header>
            <mat-panel-title>
                Location
            </mat-panel-title>
            <mat-panel-description>
                Click to expand
                <mat-icon>
                    location_on
                </mat-icon>
            </mat-panel-description>
        </mat-expansion-panel-header>
        <agm-map (mapClick)="mapClicked($event)"
                 [latitude]="defaultlat"
                 [longitude]="defaultlng"
                 [zoomControl]="false"
                 [zoom]="zoom">
            <agm-marker [latitude]="activehospital.location.latitude"
                        [longitude]="activehospital.location.longitude"
                        [markerDraggable]=true>
            </agm-marker>
        </agm-map>
    </mat-expansion-panel>

    <div class="p-8" fxFlex="1 1 100%">
        <mat-form-field appearance="outline" class="pl-4" fxFlex="100">
            <mat-label>Hospital Name</mat-label>
            <input [(ngModel)]="activehospital.name" matInput required>
            <mat-icon class="secondary-text" matSuffix>account_circle</mat-icon>
            <mat-error>Name is required!</mat-error>
        </mat-form-field>

    </div>
    <span class="pl-24" fxFlex="1 1 100%">Contact Details</span>

    <div class="p-8" fxFlex="1 1 100%">
        <mat-form-field appearance="outline" class="pl-4" fxFlex="33">
            <mat-label>Phone</mat-label>
            <input [(ngModel)]="activehospital.contactdetails.phone" matInput required>
            <mat-icon class="secondary-text" matSuffix>account_circle</mat-icon>
        </mat-form-field>

        <mat-form-field appearance="outline" class="pl-4" fxFlex="34">
            <mat-label>Email</mat-label>
            <input [(ngModel)]="activehospital.contactdetails.email" matInput required>
            <mat-icon class="secondary-text" matSuffix>account_circle</mat-icon>
        </mat-form-field>

        <mat-form-field appearance="outline" class="px-4" fxFlex="33">
            <mat-label>Address</mat-label>
            <input [(ngModel)]="activehospital.contactdetails.address" matInput required>
            <mat-icon class="secondary-text" matSuffix>account_circle</mat-icon>
        </mat-form-field>
    </div>
    <span class="pl-24" fxFlex="1 1 100%">Contact Person</span>
    <div class="p-8" fxFlex="1 1 100%">
        <mat-form-field appearance="outline" class="pl-4" fxFlex="20">
            <mat-label>Name</mat-label>
            <input [(ngModel)]="activehospital.contactperson.name" matInput required>
            <mat-icon class="secondary-text" matSuffix>account_circle</mat-icon>
        </mat-form-field>

        <mat-form-field appearance="outline" class="pl-4" fxFlex="20">
            <mat-label>Phone</mat-label>
            <input [(ngModel)]="activehospital.contactperson.phone" matInput required>
            <mat-icon class="secondary-text" matSuffix>account_circle</mat-icon>
        </mat-form-field>

        <mat-form-field appearance="outline" class="pl-4" fxFlex="20">
            <mat-label>Email</mat-label>
            <input [(ngModel)]="activehospital.contactperson.email" matInput required>
            <mat-icon class="secondary-text" matSuffix>account_circle</mat-icon>
        </mat-form-field>

        <mat-form-field appearance="outline" class="pl-4" fxFlex="20">
            <mat-label>Position</mat-label>
            <input [(ngModel)]="activehospital.contactperson.position" matInput required>
            <mat-icon class="secondary-text" matSuffix>account_circle</mat-icon>
        </mat-form-field>

        <mat-form-field appearance="outline" class="px-4" fxFlex="20">
            <mat-label>Address</mat-label>
            <input [(ngModel)]="activehospital.contactperson.address" matInput required>
            <mat-icon class="secondary-text" matSuffix>account_circle</mat-icon>
        </mat-form-field>
    </div>
    <span class="pl-24" fxFlex="1 1 100%">Payment Options</span>
    <div *ngFor="let paymentchannel of activehospital.paymentmethods ; let i = index" class="p-8" fxFlex="1 1 100%">
        <mat-form-field appearance="outline" class="pl-4" fxFlex="25">
            <mat-label>Channel</mat-label>
            <mat-select [(ngModel)]="activehospital.paymentmethods[i].paymentchannelid" required>
                <mat-option *ngFor="let channel of allpaymentchannels" [value]="channel.id">
                    {{channel.name |titlecase}}
                </mat-option>
            </mat-select>
            <mat-icon class="secondary-text" matSuffix>
                monetization_on
            </mat-icon>
        </mat-form-field>

        <mat-form-field appearance="outline" class="pl-4" fxFlex="25">
            <mat-label>Method</mat-label>
            <mat-select [(ngModel)]="activehospital.paymentmethods[i].paymentmethodid" required>
                <mat-option
                    *ngFor="let paymentmethod of getpaymentchannel(paymentchannel.paymentchannelid)?.methods | keyvalue"
                    [value]="paymentmethod.key">
                    {{paymentmethod.value.name |titlecase}}
                </mat-option>
            </mat-select>
            <mat-icon class="secondary-text" matSuffix>apps</mat-icon>
        </mat-form-field>

        <mat-form-field appearance="outline" class="pl-4" fxFlex="25">
            <mat-label>Account Number</mat-label>
            <input [(ngModel)]="activehospital.paymentmethods[i].accountnumber" matInput required>
            <mat-icon class="secondary-text" matSuffix>account_circle</mat-icon>
        </mat-form-field>

        <mat-form-field appearance="outline" class="pl-4" fxFlex="25">
            <mat-label>Extra Info</mat-label>
            <input [(ngModel)]="activehospital.paymentmethods[i].extrainfo" matInput required>
            <mat-icon class="secondary-text" matSuffix>account_circle</mat-icon>
        </mat-form-field>

    </div>
    <div class="pl-24" fxFlex="1 1 100%">
        <button (click)="addpaymentarray()" class="p-8" color="accent" mat-raised-button>ADD</button>
    </div>

    <button (click)="savehospitalchanges()" class="p-8" color="accent" fxLayoutAlign="end" mat-raised-button>SAVE
        CONFIGURATION
    </button>

</div>
